(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();class u{checkRoundWinner(e,n){if(!e.getCurrentPlay()||!n.getCurrentPlay())return null;const r={rock:"scissors",paper:"rock",scissors:"paper"};if(e.getCurrentPlay()===n.getCurrentPlay())return null;const[t,s]=[e.getCurrentPlay(),n.getCurrentPlay()];return t!==null&&s!==null?r[t]===s?(e.incrementCurrentPoints(),e):(n.incrementCurrentPoints(),n):null}declareWinner(e,n){const[r,t]=[e.getCurrentPoints(),n.getCurrentPoints()];return r===t?null:r>t?e:n}}class d{constructor(){this.currentPlay=null,this.currentPoints=0,this.name="Cpu"}getName(){return this.name}getCurrentPlay(){return this.currentPlay}getPlayerPrompt(e){return null}makePlay(e){this.currentPlay=e}autoPlay(e){const n=Math.floor(Math.random()*e.length);this.makePlay(e[n])}getCurrentPoints(){return this.currentPoints}incrementCurrentPoints(){this.currentPoints++}}class m{constructor(){this.currentPlay=null,this.currentPoints=0,this.name="Player"}getName(){return this.name}makePlay(e){this.currentPlay=e}getPlayerPrompt(e){const n=prompt(`Enter your play (${e.join(", ")}): `);return n&&e.includes(n)?n:null}getCurrentPlay(){return this.currentPlay}getCurrentPoints(){return this.currentPoints}incrementCurrentPoints(){this.currentPoints++}}class y{constructor(){this.availablePlays=["rock","paper","scissors"],this.isGameOver=!1,this.roundsToWin=0,this.currentRound=0}setRoundsToWin(e){this.roundsToWin=e}setIsGameOver(){this.isGameOver=!0}incrementRoundsToWin(){this.roundsToWin++}getIsGameOver(){return this.isGameOver}getRoundsToWin(){return this.roundsToWin}getCurrentRound(){return this.currentRound}getAvailablePlays(){return this.availablePlays}checkIfSessionIsOver(){if(this.getCurrentRound()>=this.getRoundsToWin())this.setIsGameOver();else return null}}function l(o){return new Promise(e=>setTimeout(e,o))}class p{constructor(e,n,r,t,s){this.getPrompt=prompt,this.gameMatch=e,this.player=n,this.cpu=r,this.ruleset=t,this.userInterface=s}startGame(){const e=this.gameMatch.getAvailablePlays();this.userInterface.renderRulesButton();const n=async()=>{this.userInterface.cleanWinnersContainer(),this.userInterface.renderAvailablePlays(e);const t=await this.userInterface.getUserPlay();this.player.makePlay(t),this.userInterface.renderUserPlay(t),this.userInterface.cleanAfterPlaySelect(),await l(1300),this.cpu.autoPlay(e);const s=this.cpu.getCurrentPlay();this.userInterface.renderCpuPlay(s);const a=this.ruleset.checkRoundWinner(this.player,this.cpu);await l(600),this.userInterface.renderRoundWinner(a),(a==null?void 0:a.getName())=="Player"&&this.userInterface.updatePlayerScore(this.player.getCurrentPoints()),await l(1e3),this.userInterface.renderPlayAgainButton(()=>{n()})};let r=this.player.getCurrentPoints();this.userInterface.renderScoreboard(e,r),n()}}class P{constructor(){this.userPlayResolver=null,this.cpuPlayResolver=null,this.gameMode="classic"}promptForMode(e){}cleanWinnersContainer(){document.getElementById("plays-container").classList.remove("hide");const n=document.getElementById("player-play-container");n.innerHTML="";const r=document.getElementById("cpu-play-container");r.innerHTML="";const t=document.getElementById("winner-container");t.innerHTML="";const s=document.getElementById("footer");s.style.marginTop="0"}cleanAfterPlaySelect(){document.getElementById("results-container").classList.remove("hide"),document.getElementById("plays-container").classList.add("hide");const r=document.getElementById("available-plays");r.innerHTML="";const t=document.getElementById("footer");t.style.marginTop="3rem"}renderScoreboard(e,n){const r=document.getElementById("scoreboard-container"),t=document.getElementById("scoreboard-plays"),s=document.getElementById("scoreboard-score"),a=document.getElementById("score-points");a.innerText=`${n}`,s.append(a),e.forEach(c=>{const i=document.createElement("p");i.innerText=`${c.toUpperCase()}`,t.append(i)}),r.append(t,s)}updatePlayerScore(e){const n=document.getElementById("score-points");n.innerHTML="",n.innerText=`${e}`}renderAvailablePlays(e){const n=document.getElementById("plays-container"),r=document.getElementById("available-plays");if(!n||!r)throw new Error("Containers not found in DOM");e.forEach(t=>{const s=document.createElement("div"),a=document.createElement("button");s.classList.add("button_outline"),s.classList.add(`button_outline_${t}`),a.style.backgroundImage=`url('../src/assets/images/icon-${t}.svg')`,a.onclick=()=>{this.userPlayResolver&&(this.userPlayResolver(t),this.userPlayResolver=null)},s.append(a),r.append(s)}),n.append(r)}getUserPlay(){return new Promise(e=>{this.userPlayResolver=e})}getCpuPlay(){return new Promise(e=>{this.cpuPlayResolver=e})}renderUserPlay(e){const n=document.createElement("div"),r=document.createElement("button"),t=document.createElement("p");t.innerText="YOU PICKED",r.style.backgroundImage=`url("../../src/assets/images/icon-${e}.svg")`,n.classList.add("button_outline"),n.classList.add(`button_outline_${e}`),n.append(r),document.getElementById("player-play-container").append(n,t)}renderCpuPlay(e){const n=document.getElementById("cpu-play-container"),r=document.createElement("div"),t=document.createElement("button"),s=document.createElement("p");s.innerText="THE HOUSE PICKED",t.style.backgroundImage=`url("../../src/assets/images/icon-${e}.svg")`,r.classList.add("button_outline"),r.classList.add(`button_outline_${e}`),r.append(t),n.append(r,s)}renderRoundWinner(e){document.getElementById("results-container").classList.remove("hide");const r=document.getElementById("winner-container"),t=document.getElementById("winner-container"),s=document.createElement("p"),a=e==null?void 0:e.getName();t&&e!==null?a!=="Player"?s.innerText="YOU LOSE":s.innerText="YOU WIN":s.innerText="Tie",r.append(s),t.append(s)}renderPlayAgainButton(e){const n=document.getElementById("winner-container"),r=document.createElement("div");r.classList.add("play_again_button");const t=document.createElement("button");t.innerText="PLAY AGAIN",t.addEventListener("click",e),r.append(t),n.append(r)}renderRulesButton(){const e=document.createElement("button");e.innerText="RULES",document.getElementById("footer").append(e),e.addEventListener("click",()=>{const r=document.createElement("div");r.id="rules-overlay",r.classList.add("rules_overlay");const t=document.createElement("div");t.id="rules-modal",t.classList.add("rules_modal"),t.style.backgroundImage='url("../../src/assets/images/image-rules.svg")';const s=document.createElement("p");s.innerText="RULES";const a=document.createElement("div");a.style.backgroundImage='url("../../src/assets/images/icon-close.svg")',a.id="close-rules",a.classList.add("close_rules"),t.append(a,s),r.append(t),document.body.append(r),document.getElementById("close-rules").addEventListener("click",()=>{document.body.removeChild(r)})})}}const g=new m,h=new d,f=new u,C=new y,E=new P,I=new p(C,g,h,f,E);I.startGame();
